<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="PhÃ¢n tÃ­ch chi tiáº¿t bÃ i thÆ¡ 'SÃ´ng ÄÃ¡y' cá»§a Nguyá»…n Quang Thiá»u" />
  <meta name="keywords" content="SÃ´ng ÄÃ¡y, Nguyá»…n Quang Thiá»u, bÃ i thÆ¡, phÃ¢n tÃ­ch vÄƒn há»c" />
  <meta name="author" content="NhÃ³m CÃ´ng Nghá»‡ - 11A3 - THPT Kim LiÃªn" />
  <meta name="theme-color" content="#4DA3FF" />
  
  <meta property="og:type" content="website" />
  <meta property="og:title" content="SÃ´ng ÄÃ¡y - DÃ²ng cháº£y kÃ½ á»©c | PhÃ¢n tÃ­ch bÃ i thÆ¡ kinh Ä‘iá»ƒn" />
  <meta property="og:description" content="KhÃ¡m phÃ¡ hÃ nh trÃ¬nh kÃ½ á»©c qua bÃ i thÆ¡ SÃ´ng ÄÃ¡y cá»§a Nguyá»…n Quang Thiá»u. Tráº£i nghiá»‡m tÆ°Æ¡ng tÃ¡c vá»›i animations mÆ°á»£t mÃ , phÃ¢n tÃ­ch chi tiáº¿t 3 pháº§n thÆ¡, quáº£n lÃ½ tiáº¿n Ä‘á»™ há»c táº­p." />
  <meta property="og:image" content="work.webp" />
  <meta property="og:locale" content="vi_VN" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="SÃ´ng ÄÃ¡y - DÃ²ng cháº£y kÃ½ á»©c" />
  <meta name="twitter:description" content="PhÃ¢n tÃ­ch tÆ°Æ¡ng tÃ¡c bÃ i thÆ¡ SÃ´ng ÄÃ¡y - hÃ nh trÃ¬nh kÃ½ á»©c, quÃª hÆ°Æ¡ng & tÃ¬nh máº«u tá»­" />
  <meta name="twitter:image" content="work.webp" />
  
  <!-- Favicon -->
  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><defs><style>.river{fill:none;stroke:%234DA3FF;stroke-width:3;stroke-linecap:round}.wave{fill:%234DA3FF;opacity:0.8}</style></defs><rect width='100' height='100' fill='%23000000'/><path class='river' d='M 10 50 Q 25 40, 40 50 T 70 50 T 100 50'/><path class='river' d='M 5 60 Q 20 55, 35 65 T 65 65 T 100 60'/><circle class='wave' cx='20' cy='50' r='3'/><circle class='wave' cx='50' cy='55' r='3'/><circle class='wave' cx='80' cy='48' r='3'/></svg>" />
  <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 180 180'><rect width='180' height='180' fill='%23000000' rx='40'/><text x='90' y='100' font-size='80' fill='%234DA3FF' text-anchor='middle' font-family='serif' font-weight='bold'>å±±</text></svg>" />
  
  <!-- Manifest for PWA -->
  <link rel="manifest" href="data:application/manifest+json,{%22name%22:%22SÃ´ng ÄÃ¡y - DÃ²ng cháº£y kÃ½ á»©c%22,%22short_name%22:%22SÃ´ng ÄÃ¡y%22,%22description%22:%22PhÃ¢n tÃ­ch bÃ i thÆ¡ SÃ´ng ÄÃ¡y%22,%22start_url%22:%22/%22,%22display%22:%22standalone%22,%22background_color%22:%22%23000000%22,%22theme_color%22:%22%234DA3FF%22,%22icons%22:[{%22src%22:%22data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 192 192'><rect width='192' height='192' fill='%23000000' rx='50'/><circle cx='96' cy='96' r='80' fill='none' stroke='%234DA3FF' stroke-width='4'/><path d='M 60 96 L 96 120 L 132 70' fill='none' stroke='%234DA3FF' stroke-width='4' stroke-linecap='round'/></svg>%22,%22sizes%22:%22192x192%22,%22type%22:%22image/svg+xml%22}]}" />
  
  <title>SÃ´ng ÄÃ¡y - DÃ²ng cháº£y kÃ½ á»©c</title>
  <link rel="stylesheet" href="styles.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Italianno&display=swap" rel="stylesheet">
</head>
<body>

<!-- Learning Tasks Tracker -->
<div class="todo-list">
  <div class="todo-header">ğŸ“š Nhiá»‡m vá»¥ há»c táº­p</div>
  <div class="todo-items">
    <label class="todo-item" data-panels="author,work">
      <input type="checkbox" class="todo-checkbox" />
      <span class="todo-text">TÃ¬m hiá»ƒu tÃ¡c giáº£ & tÃ¡c pháº©m</span>
    </label>
    <label class="todo-item" data-panels="content1,analysis1">
      <input type="checkbox" class="todo-checkbox" />
      <span class="todo-text">Pháº§n 1: KÃ½ á»©c tuá»•i thÆ¡</span>
    </label>
    <label class="todo-item" data-panels="content2,analysis2">
      <input type="checkbox" class="todo-checkbox" />
      <span class="todo-text">Pháº§n 2: Ná»—i nhá»› xa quÃª</span>
    </label>
    <label class="todo-item" data-panels="content3,analysis3">
      <input type="checkbox" class="todo-checkbox" />
      <span class="todo-text">Pháº§n 3: Trá»Ÿ vá» quÃª hÆ°Æ¡ng</span>
    </label>
    <label class="todo-item" data-panels="conclusion,artistic,meaning">
      <input type="checkbox" class="todo-checkbox" />
      <span class="todo-text">Tá»•ng káº¿t giÃ¡ trá»‹ bÃ i thÆ¡</span>
    </label>
  </div>
</div>

<!-- Progress River Tracking -->
<div class="progress-river">
  <div class="progress-label">0%</div>
  <svg viewBox="0 0 50 320" preserveAspectRatio="none">
    <defs>
      <linearGradient id="waterGradient" x1="0%" y1="0%" x2="0%" y2="100%">
        <stop offset="0%" style="stop-color:rgba(77,163,255,0.5);stop-opacity:1" />
        <stop offset="100%" style="stop-color:rgba(77,163,255,0.85);stop-opacity:1" />
      </linearGradient>
      <filter id="glow">
        <feGaussianBlur stdDeviation="1" result="coloredBlur"/>
        <feMerge>
          <feMergeNode in="coloredBlur"/>
          <feMergeNode in="SourceGraphic"/>
        </feMerge>
      </filter>
      <clipPath id="riverClip">
        <path id="riverShape" d="M 8,0 Q 15,8 25,0 Q 35,8 42,0 L 42,320 Q 35,312 25,320 Q 15,312 8,320 L 8,0 Z" />
      </clipPath>
    </defs>

    <use href="#riverShape" class="river-bg" filter="url(#glow)" />

    <g clip-path="url(#riverClip)">
      <rect id="waterRect" x="0" y="320" width="50" height="0" fill="url(#waterGradient)" />
      <path id="waterWave" d="M0,320 Q12,312 25,320 Q38,312 50,320 L50,320 L0,320 Z" class="water-ripple" fill="rgba(255,255,255,0.06)" />
    </g>

    <use href="#riverShape" class="river-border" filter="url(#glow)" />
  </svg>
</div>

<header>
  <h1>SÃ”NG ÄÃY - DÃ’NG CHáº¢Y KÃ á»¨C</h1>
</header>

<!-- Divider I -->
<div class="section-divider slide-up animate-delay-1">
  <div class="divider-line">
    <span class="divider-text">I. TÃ¬m hiá»ƒu chung</span>
  </div>
</div>

<div class="section-1 slide-in-left animate-delay-2">
  <div class="intro">
    <h3>TÃ¬m hiá»ƒu vá» tÃ¡c giáº£, tÃ¡c pháº©m</h3>
  </div>
  <div class="controls" role="tablist" aria-label="Menu Ä‘iá»u khiá»ƒn">
    <button class="control-btn" data-target="author" aria-expanded="false">TÃ¡c giáº£</button>
    <button class="control-btn" data-target="work" aria-expanded="false">TÃ¡c pháº©m</button>
  </div>

  <div id="author" class="control-panel" aria-hidden="true">
    <div class="panel-content">
      <img src="author.jpg" alt="áº¢nh tÃ¡c giáº£" />
      <div class="panel-text">
        <h3>Nguyá»…n Quang Thiá»u</h3>
        <p>- NhÃ  thÆ¡ Nguyá»…n Quang Thiá»u (sinh nÄƒm 1957) - má»™t tiáº¿ng nÃ³i Ä‘Æ°Æ¡ng Ä‘áº¡i giÃ u cáº£m xÃºc, viáº¿t nhiá»u vá» kÃ½ á»©c, quÃª hÆ°Æ¡ng vÃ  con ngÆ°á»i Viá»‡t Nam.</p>
        <p>- QuÃª: thÃ´n HoÃ ng DÆ°Æ¡ng (LÃ ng ChÃ¹a), xÃ£ SÆ¡n CÃ´ng, huyá»‡n á»¨ng HÃ²a, tá»‰nh HÃ  TÃ¢y (nay thuá»™c HÃ  Ná»™i).</p>
        <p>- Phong cÃ¡ch thÆ¡: viáº¿t vá» cÃ¡c Ä‘á» tÃ i gáº§n gÅ©i, káº¿t há»£p giá»¯a truyá»n thá»‘ng vÃ  hiá»‡n Ä‘áº¡i lÃ m nÃªn cÃ¡i má»›i ráº¥t riÃªng cá»§a nhÃ  thÆ¡ hiá»‡n Ä‘áº¡i, Ä‘áº­m mÃ u sáº¯c tÆ°á»£ng trÆ°ng, siÃªu thá»±c.</p>
        <p>- Hiá»‡n lÃ  Chá»§ tá»‹ch Há»™i NhÃ  vÄƒn Viá»‡t Nam; PhÃ³ Tá»•ng thÆ° kÃ½ thá»© nháº¥t Há»™i NhÃ  vÄƒn Ã - Phi; GiÃ¡m Ä‘á»‘c - Tá»•ng BiÃªn táº­p NhÃ  xuáº¥t báº£n Há»™i NhÃ  vÄƒn.</p>
        <p>- DÃ¹ Ä‘áº¿n vá»›i thÆ¡ khÃ¡ muá»™n vÃ o nÄƒm 25 tuá»•i, Ã´ng Ä‘Ã£ trá»Ÿ thÃ nh nhÃ  thÆ¡ hiá»‡n Ä‘áº¡i tiÃªu biá»ƒu cá»§a lÃ ng vÄƒn há»c Viá»‡t Nam.</p>
        <p>- TÃ¡c pháº©m tiÃªu biá»ƒu: <b><i>ThÃ nh phá»‘ chá»‰ sá»‘ng 60 ngÃ y</i></b> (1991); <b><i>MÃ¹a hoa cáº£i bÃªn sÃ´ng</i></b> (1989); <b><i>Cá» hoang, tiá»ƒu thuyáº¿t</i></b> (1992); <b><i>NgÃ´i nhÃ  tuá»•i 17</i></b> (1990); <b><i>CÃ¡i cháº¿t cá»§a báº§y má»‘i</i></b> (1991);...</p>
        <div class="panel-actions">
          <button class="feature-btn" onclick="openImage('author.jpg', 'img-author')">ğŸ” Xem áº£nh</button>
        </div>
      </div>
    </div>
  </div>

  <div id="work" class="control-panel" aria-hidden="true">
    <div class="panel-content">
      <img src="work.webp" alt="áº¢nh tÃ¡c pháº©m" />
      <div class="panel-text">
        <h3>SÃ´ng ÄÃ¡y</h3>
          <p>a) HoÃ n cáº£nh sÃ¡ng tÃ¡c/ Xuáº¥t xá»©:
          <br>- TÃ¡c pháº©m SÃ´ng ÄÃ¡y sÃ¡ng tÃ¡c nÄƒm 1991, khi tÃ¡c giáº£ trá»Ÿ vá» thÄƒm quÃª hÆ°Æ¡ng, thÄƒm láº¡i dÃ²ng sÃ´ng ÄÃ¡y thÃ¢n yÃªu.
          <br>- TrÃ­ch trong táº­p thÆ¡ <b><i>â€œSá»± máº¥t ngá»§ cá»§a lá»­aâ€</i></b> (1992).</p>
          <p>b) Thá»ƒ thÆ¡: Tá»± do</p>
          <p>c) PhÆ°Æ¡ng thá»©c biá»ƒu Ä‘áº¡t: Biá»ƒu cáº£m</p>
          <p>d) HÃ¬nh tÆ°á»£ng thÆ¡: HÃ¬nh tÆ°á»£ng <b><i>â€œSÃ´ng ÄÃ¡yâ€</i></b> xuyÃªn suá»‘t kháº¯p chiá»u dÃ i cá»§a tÃ¡c pháº©m, mang nhiá»u táº§ng Ã½ nghÄ©a; <b><i>â€œSÃ´ng ÄÃ¡yâ€</i></b> vá»«a lÃ  quÃª hÆ°Æ¡ng, tÃ¬nh máº«u tá»­, tÃ¬nh yÃªu, vá»«a lÃ  má»™t ngÆ°á»i báº¡n vÃ´ hÃ¬nh á»Ÿ bÃªn tÃ¡c giáº£. Nguyá»…n Quang Thiá»u Ä‘Ã£ táº¡o nÃªn má»™t tháº¿ giá»›i nghá»‡ thuáº­t trong <b><i>â€œSÃ´ng ÄÃ¡yâ€</i></b>, vÃ  trong tháº¿ giá»›i nghá»‡ thuáº­t áº¥y thÃ¬ nhÃ¢n váº­t <b><i>â€œtÃ´iâ€</i></b> lÃ  nhÃ¢n váº­t trá»¯ tÃ¬nh.</p>
          <div class="timeline-work">
            <h4>e) Bá»‘ cá»¥c: 3 pháº§n</h4>

            <div class="timeline-row">
              <div class="timeline-step">
                <div class="step-number">1</div>
                <p>Tá»« Ä‘áº§u Ä‘áº¿n â€œmá»™t máº£nh sÃ´ng Ä‘Ãªmâ€<br>
                â†’ SÃ´ng ÄÃ¡y trong miá»n kÃ½ á»©c thuá»Ÿ áº¥u thÆ¡.</p>
              </div>

              <div class="timeline-step">
                <div class="step-number">2</div>
                <p>Tá»« â€œNÄƒm thÃ¡ng sá»‘ng xa quÃªâ€ Ä‘áº¿n â€œgiÃ n giá»¥a nÆ°á»›c mÆ°a sÃ´ngâ€<br>
                â†’ Niá»m nhá»› thÆ°Æ¡ng quÃª nhÃ  da diáº¿t trong nhá»¯ng nÄƒm thÃ¡ng xa quÃª.</p>
              </div>

              <div class="timeline-step">
                <div class="step-number">3</div>
                <p>Pháº§n cÃ²n láº¡i<br>
                â†’ SÃ´ng ÄÃ¡y vÃ  ná»—i xÃºc Ä‘á»™ng ngháº¹n ngÃ o ngÃ y trá»Ÿ vá» quÃª hÆ°Æ¡ng.</p>
              </div>
            </div>
          </div>
        <div class="panel-actions">
          <button class="feature-btn" onclick="openImage('work.webp', 'img-work')">ğŸ” Xem áº£nh</button>
          <a class="feature-btn" href="#" onclick="downloadExcerpt();return false;">â¬‡ï¸ Táº£i Ä‘oáº¡n trÃ­ch</a>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Divider II -->
<div class="section-divider slide-up animate-delay-3">
  <div class="divider-line">
    <span class="divider-text">II. TÃ¬m hiá»ƒu chi tiáº¿t</span>
  </div>
</div>

<!-- Section 2 -->
<div class="section section-2 slide-in-right animate-delay-4">
  <div class="intro">
    <h3>Pháº§n 1: HÃ¬nh áº£nh sÃ´ng ÄÃ¡y trong kÃ½ á»©c tuá»•i thÆ¡</h3>
  </div>
  <div class="controls" role="tablist" aria-label="Menu phÃ¢n tÃ­ch">
    <button class="control-btn" data-target="content1" aria-expanded="false">Ná»™i dung</button>
    <button class="control-btn" data-target="analysis1" aria-expanded="false">PhÃ¢n tÃ­ch</button>
  </div>

  <div id="content1" class="control-panel" aria-hidden="true">
    <div class="panel-content">
      <div class="panel-text">
        
        <p>â€œSÃ´ng ÄÃ¡y cháº£y vÃ o Ä‘á»i tÃ´i
        <br>NhÆ° máº¹ tÃ´i gÃ¡nh náº·ng ráº½ vÃ o ngÃµ sau má»—i buá»•i chiá»u Ä‘i lÃ m vá» váº¥t váº£
        <br>TÃ´i dá»¥i máº·t vÃ o lÆ°ng ngÆ°á»i Ä‘áº«m má»“ hÃ´i mÃ¡t má»™t máº£nh sÃ´ng Ä‘Ãªmâ€</p>
        <div class="panel-actions">
          <button class="feature-btn" onclick="playAudio('phan1.mp3')">ğŸ”Š Äá»c</button>
          <button class="feature-btn" onclick="stopAudio()">â¹ï¸ Dá»«ng Ä‘á»c</button>
        </div>
      </div>
    </div>
  </div>

  <div id="analysis1" class="control-panel" aria-hidden="true">
    <div class="panel-content">
      <img src="phan1.png" alt="áº¢nh minh há»a" />
      <div class="panel-text">
        <h3>PhÃ¢n tÃ­ch</h3>
        <p>- CÃ¢u thÆ¡ má»Ÿ Ä‘áº§u nhÆ° má»™t lá»i thÃº nháº­n vá» má»‘i quan há»‡ cháº·t khÃ´ng thá»ƒ tÃ¡ch rá»i cá»§a nhÃ¢n váº­t trá»¯ tÃ¬nh vÃ  sÃ´ng ÄÃ¡y, Ä‘Ã³ chÃ­nh lÃ  khá»Ÿi nguá»“n cá»§a tÃ¬nh yÃªu, cá»™i nguá»“n cá»§a nhá»¯ng sÃ¡ng táº¡o nghá»‡ thuáº­t.</p>
        <p>- PhÃ©p so sÃ¡nh <b><i>â€œSÃ´ng ÄÃ¡yâ€</i></b> - <b><i>â€œmáº¹â€</i></b> cho tháº¥y con sÃ´ng vÃ  máº¹ tá»« hai hÃ¬nh tÆ°á»£ng riÃªng láº» Ä‘Ã£ hÃ²a nháº­p vÃ o lÃ m má»™t, cÃ³ má»‘i tÆ°Æ¡ng quan máº­t thiáº¿t vá»›i nhau. á» Ä‘Ã³, sÃ´ng ÄÃ¡y lÃ  dÃ²ng sÃ´ng cá»§a quÃª hÆ°Æ¡ng cÃ²n máº¹ chÃ­nh lÃ  dÃ²ng sÃ´ng dáº¡t dÃ o Ä‘á»©c hi sinh vÃ  tÃ¬nh yÃªu thÆ°Æ¡ng.</p>
        <p>- HÃ¬nh áº£nh <b><i>â€œmáº¹ tÃ´i gÃ¡nh náº·ng ráº½ vÃ o ngÃµ sau má»—i buá»•i chiá»u Ä‘i lÃ m vá» váº¥t váº£â€</i></b> gá»£i lÃªn bÃ³ng dÃ¡ng cá»§a nhá»¯ng ngÆ°á»i phá»¥ ná»¯ Viá»‡t Nam lam lÅ©, bÆ°Æ¡n tráº£i, giÃ u Ä‘á»©c hy sinh, sá»± bao dung vÃ  cao thÆ°á»£ng.</p>
        <p>- Tháº¥u hiá»ƒu Ä‘Æ°á»£c nhá»¯ng váº¥t váº£, nhá»c nháº±n cá»§a máº¹ cÃ¹ng vá»›i tÃ¬nh thÆ°Æ¡ng máº¹ thiáº¿t tha, ná»“ng nÃ n, nhÃ¢n váº­t trá»¯ tÃ¬nh Ä‘Ã£ <b><i>â€œdá»¥i máº·t vÃ o lÆ°ng ngÆ°á»i Ä‘áº«m má»“ hÃ´iâ€</i></b> nhÆ° má»™t cÃ¡ch kiáº¿m tÃ¬m sá»± bÃ¬nh yÃªn nÆ¡i máº¹.</p>
        <p>- HÃ¬nh áº£nh lÆ°ng máº¹ vÃ  <b><i>â€œmáº£nh sÃ´ng Ä‘Ãªmâ€</i></b> cÃ³ má»‘i quan há»‡ cháº·t cháº½; lÆ°ng máº¹ áº¥m Ã¡p, vá»¯ng trÃ£i, luÃ´n che chá»Ÿ cho con cÅ©ng nhÆ° dÃ²ng sÃ´ng luÃ´n báº£o vá»‡, chá»Ÿ che cho quÃª hÆ°Æ¡ng vÃ  cho ngÆ°á»i dÃ¢n.</p>
        <p>â†’ Qua hÃ¬nh tÆ°á»£ng sÃ´ng ÄÃ¡y, Nguyá»…n Quang Thiá»u khÃ´ng chá»‰ tÃ¡i hiá»‡n má»™t miá»n kÃ½ á»©c tuá»•i thÆ¡ dá»¯ dá»™i, nghÄ©a tÃ¬nh mÃ  cÃ²n kháº³ng Ä‘á»‹nh sá»©c máº¡nh cá»§a cá»™i nguá»“n - nÆ¡i luÃ´n bao dung, Ä‘Ã³n nháº­n chá»Ÿ che, Ä‘em láº¡i nhá»¯ng cáº£m giÃ¡c bÃ¬nh yÃªn cho con ngÆ°á»i.</p>
        <div class="panel-actions">
          <button class="feature-btn" onclick="openImage('phan1.png', 'img-phan1')">ğŸ” Xem áº£nh</button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Section 3 -->
<div class="section section-3 slide-in-left animate-delay-5">
  <div class="intro">
    <h3>Pháº§n 2: HÃ¬nh áº£nh sÃ´ng ÄÃ¡y vÃ  ná»—i nhá»› quÃª nhÃ  da diáº¿t trong nhá»¯ng nÄƒm thÃ¡ng xa quÃª</h3>
  </div>
  <div class="controls" role="tablist" aria-label="Menu Ä‘oáº¡n thÆ¡ 2">
    <button class="control-btn" data-target="content2" aria-expanded="false">Ná»™i dung</button>
    <button class="control-btn" data-target="analysis2" aria-expanded="false">PhÃ¢n tÃ­ch</button>
  </div>

  <div id="content2" class="control-panel" aria-hidden="true">
    <div class="panel-content">
      <div class="panel-text">
        <p>â€œNÄƒm thÃ¡ng sá»‘ng xa quÃª tÃ´i nhÆ° ngÆ°á»i bÆ°á»›c há»¥t
        <br>CÆ¡n mÆ¡ vang lÃªn tiáº¿ng cÃ¡ quáº«y tuá»™t cÃ¢u nhÆ° má»™t tiáº¿ng náº¥c
        <br>Ã‚m tháº§m vá»¡ trong tÃ´i, Ã¢m tháº§m vá»¡ cuá»‘i nguá»“n
        <br>Tá»a mÃ¡t xuá»‘ng cÆ¡n Ä‘au tÃ´i lÃ  tÃ³c máº¹ báº¿n mÃ²n Ä‘á»©ng Ä‘á»£i
        <br>Má»™t cÃ¢y ngÃ´ cuá»‘i vá»¥ khÃ´ gáº§y
        <br>Suá»‘t Ä‘á»i buá»“n trong tiáº¿ng lÃ¡ reo.
        <br>Nhá»¯ng chiá»u xa quÃª tÃ´i mong dÃ²ng sÃ´ng dÃ¢ng lÃªn ngang trá»i cho tÃ´i Ä‘Æ°á»£c nhÃ¬n tháº¥y
        <br>Cho Ä‘Ã´i máº¯t nhá»› thÆ°Æ¡ng cá»§a tÃ´i nhÆ° hai há»‘c Ä‘áº¥t ven bá», 
        <br>nÆ¡i nhá»¯ng chÃº bá»‘ng Ä‘áº¿n lÃ m tá»• Ä‘Æ°á»£c giÃ n dá»¥a nÆ°á»›c mÆ°a sÃ´ng.â€</p>
        <div class="panel-actions">
          <button class="feature-btn" onclick="playAudio('phan2.mp3')">ğŸ”Š Äá»c</button>
          <button class="feature-btn" onclick="stopAudio()">â¹ï¸ Dá»«ng Ä‘á»c</button>
        </div>
      </div>
    </div>
  </div>

  <div id="analysis2" class="control-panel" aria-hidden="true">
    <div class="panel-content">
      <img src="phan2.png" alt="áº¢nh minh há»a" />
      <div class="panel-text">
        <h3>PhÃ¢n tÃ­ch</h3>
        <p>- Cá»¥m tá»« <b><i>â€œbÆ°á»›c há»¥tâ€</i></b> chá»‰ tráº¡ng thÃ¡i khÃ´ng vá»¯ng cháº¯c khi tÃ¡ch mÃ¬nh ra khá»i bÃ³ng quÃª hÆ°Æ¡ng. NhÃ¢n váº­t trá»¯ tÃ¬nh nháº­n ra con Ä‘Æ°á»ng mÃ¬nh Ä‘i Ä‘áº§y chÃ´ng chÃªnh, bÆ¡ vÆ¡, láº¡c lÃµng. Tá»« Ä‘Ã³, quÃª hÆ°Æ¡ng trá»Ÿ thÃ nh chá»— dá»±a vá»¯ng cháº¯c trong cuá»™c Ä‘á»i má»—i ngÆ°á»i.</p>
        <p>- DÃ¹ á»Ÿ nÆ¡i xa nhÆ°ng trong tiá»m thá»©c cá»§a nhÃ¢n váº­t trá»¯ tÃ¬nh váº«n luÃ´n kháº¯c khoáº£i, nhá»› nhung nhá»¯ng Ã¢m thanh cá»§a <b><i>â€œtiáº¿ng cÃ¡ quáº«y tuá»™t cÃ¢uâ€</i></b>, Ã¢m thanh cá»§a sÃ´ng nÆ°á»›c tá»± nhiÃªn; tiáº¿ng vá»ng cá»§a quÃª hÆ°Æ¡ng cÅ©ng Ä‘ang Ã¢m tháº§m vÄƒng váº³ng bÃªn tai <b><i>â€œtÃ´iâ€</i></b>.</p>
        <p>- Ba cÃ¢u thÆ¡ tiáº¿p theo, hÃ¬nh áº£nh cá»§a <b><i>â€œmáº¹â€</i></b> láº¡i hiá»‡n lÃªn qua phÃ©p áº©n dá»¥ <b><i>â€œtÃ³c máº¹ báº¿n mÃ²n Ä‘á»©ng Ä‘á»£iâ€</i></b>, <b><i>â€œcÃ¢y ngÃ´ cuá»‘i vá»¥ khÃ´ gáº§y suá»‘t Ä‘á»i buá»“n trong tiáº¿ng lÃ¡ reoâ€</i></b>. Nhá»¯ng hÃ¬nh áº£nh áº¥y Ä‘Ã£ kháº¯c há»a hÃ¬nh dÃ¡ng cÃ²m cÃµi, xÆ¡ xÃ¡c cá»§a ngÆ°á»i máº¹ Ä‘ang dÃµi theo, ngÃ³ng Ä‘á»£i con trá»Ÿ vá».</p>
        <p>- Hai cÃ¢u thÆ¡ dÃ i hÆ¡i, háº¡n cháº¿ ngáº¯t váº¿ nhÆ° sá»± vá»¡ Ã²a cáº£m xÃºc, niá»m nhá»› quÃª hÆ°Æ¡ng nhÆ° dÃ²ng nÆ°á»›c xiáº¿t khÃ´ng cÃ²n tÄ©nh láº·ng mÃ  mÃ£nh liá»‡t dÃ¢ng trÃ o.</p>
        <p>â†’ NhÃ¢n váº­t trá»¯ tÃ¬nh khÃ¡t khao Ä‘Æ°á»£c nháº­n diá»‡n quÃª hÆ°Æ¡ng, Ä‘Æ°á»£c hÃ³a thÃ¢n vÃ o máº£nh Ä‘áº¥t, vÃ o dÃ²ng sÃ´ng quÃª.</p>
        <div class="panel-actions">
          <button class="feature-btn" onclick="openImage('phan2.png', 'img-phan2')">ğŸ” Xem áº£nh</button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Section 4 -->
<div class="section section-4 slide-in-right animate-delay-7">
  <div class="intro">
    <h3>Pháº§n 3: HÃ¬nh áº£nh sÃ´ng ÄÃ¡y vÃ  ná»—i xÃºc Ä‘á»™ng ngháº¹n ngÃ o ngÃ y trá»Ÿ vá» quÃª hÆ°Æ¡ng</h3>
  </div>
  <div class="controls" role="tablist" aria-label="Menu pháº§n 3">
    <button class="control-btn" data-target="content3" aria-expanded="false">Ná»™i dung</button>
    <button class="control-btn" data-target="analysis3" aria-expanded="false">PhÃ¢n tÃ­ch</button>
  </div>

  <div id="content3" class="control-panel" aria-hidden="true">
    <div class="panel-content">
      <div class="panel-text">
        <p>â€œSÃ´ng ÄÃ¡y Æ¡i! Chiá»u nay tÃ´i trá»Ÿ láº¡i
        <br>Nhá»¯ng cÃ¡nh buá»“m cá»• tÃ­ch Ä‘Ã£ bay xa vá» má»™t niá»m tá»©c tÆ°á»Ÿi
        <br>Em Ä‘Ã£ mang Ä‘Ã´i mÃ´i mÃ u dÃ¢u chÃ­n sang Ä‘Ã² má»™t ngÃ y sÃ´ng váº¯ng nÆ°á»›c
        <br>SÃ´ng ÄÃ¡y Æ¡i, sÃ´ng ÄÃ¡y Æ¡iâ€¦ chiá»u nay tÃ´i trá»Ÿ láº¡i
        <br>Máº¹ tÃ´i Ä‘Ã£ giÃ  nhÆ° cÃ¡t bÃªn bá»
        <br>Ã”i mÃ¹i cÃ¡t khÃ´, mÃ¹i tÃ³c máº¹ tÃ´i
        <br>TÃ´i quÃ¬ xuá»‘ng vá»‘c cÃ¡t áº¥p vÃ o máº·t
        <br>TÃ´i khÃ³c.
        <br>CÃ¡t tá»« máº·t tÃ´i cháº£y xuá»‘ng dÃ²ng dÃ²ng.â€</p>
        <div class="panel-actions">
          <button class="feature-btn" onclick="playAudio('phan3.mp3')">ğŸ”Š Äá»c</button>
          <button class="feature-btn" onclick="stopAudio()">â¹ï¸ Dá»«ng Ä‘á»c</button>
        </div>
      </div>
    </div>
  </div>

  <div id="analysis3" class="control-panel" aria-hidden="true">
    <div class="panel-content">
      <img src="phan3.png" alt="áº¢nh minh há»a" />
      <div class="panel-text">
        <h3>PhÃ¢n tÃ­ch</h3>
        <p>- CÃ¢u cáº£m thÃ¡n <b><i>â€œSÃ´ng ÄÃ¡y Æ¡i! Chiá»u nay tÃ´i trá»Ÿ láº¡iâ€</i></b> vang lÃªn Ä‘áº§y xÃºc Ä‘á»™ng. Sau bao ngÃ y mong ngÃ³ng, giá» Ä‘Ã¢y tÃ¡c giáº£ Ä‘Ã£ thá»±c sá»± Ä‘Æ°á»£c trá»Ÿ vá» bÃªn dÃ²ng sÃ´ng ÄÃ¡y thÃ¢n yÃªu.</p>
        <p>â†’ Cáº£m xÃºc trÃ o dÃ¢ng, vá»«a vui má»«ng, vá»«a bá»“i há»“i khi Ä‘á»©ng trÆ°á»›c cáº£nh cÅ©, sÃ´ng xÆ°a.</p>
        <p>- HÃ¬nh áº£nh <b><i>â€œchiá»u nay tÃ´i trá»Ÿ láº¡iâ€</i></b> cho tháº¥y sá»± trá»Ÿ vá» khÃ´ng chá»‰ vá» máº·t khÃ´ng gian mÃ  cÃ²n vá» tÃ¢m há»“n, lÃ  sá»± hoÃ i niá»‡m vá» quÃ¡ khá»©.</p>
        <p>- <b><i>â€œNhá»¯ng cÃ¡nh buá»“m cá»• tÃ­châ€</i></b> - biá»ƒu tÆ°á»£ng cá»§a kÃ½ á»©c tuá»•i thÆ¡, Ä‘Ã£ gá»£i lÃªn hÃ¬nh áº£nh tuá»•i thÆ¡ Ãªm Ä‘á»m, nhá»¯ng Æ°á»›c mÆ¡ bay xa, gáº¯n liá»n vá»›i sÃ´ng nÆ°á»›c quÃª hÆ°Æ¡ng. Nhá»¯ng cÃ¡nh buá»“m áº¥y <b><i>â€œÄ‘Ã£ bay xa vá» má»™t niá»m tá»©c tÆ°á»Ÿiâ€</i></b>, thá»ƒ hiá»‡n sá»± máº¥t mÃ¡t, tiáº¿c nuá»‘i vÃ¬ nhá»¯ng gÃ¬ Ä‘áº¹p Ä‘áº½ cá»§a quÃ¡ khá»© Ä‘Ã£ khÃ´ng cÃ²n nguyÃªn váº¹n.</p>
        <p>- HÃ¬nh áº£nh <b><i>â€œÄ‘Ã´i mÃ´i mÃ u dÃ¢u chÃ­nâ€</i></b> cÃ³ thá»ƒ gá»£i lÃªn sá»± tÆ°Æ¡i tráº», Ä‘áº§y sá»©c sá»‘ng cá»§a má»™t ngÆ°á»i con gÃ¡i Ä‘Ã£ tá»«ng xuáº¥t hiá»‡n trong kÃ½ á»©c tÃ¡c giáº£.</p>
        <p>- NhÆ°ng Ä‘á»‘i láº­p vá»›i Ä‘Ã³ lÃ  thá»±c táº¿ <b><i>â€œsang Ä‘Ã² má»™t ngÃ y sÃ´ng váº¯ng nÆ°á»›câ€</i></b>, táº¡o cáº£m giÃ¡c trá»‘ng váº¯ng, máº¥t mÃ¡t, nhÆ° má»™t sá»± chia xa hoáº·c Ä‘á»•i thay khÃ´ng thá»ƒ nÃ­u giá»¯.</p>
        <p>â†’ DÃ²ng sÃ´ng nhÆ° má»™t nhÃ¢n chá»©ng sá»‘ng cá»§a má»™t sá»‘ pháº­n lá»¡ lÃ ng.</p>
        <p>- Cá»¥m tá»« <b><i>â€œsÃ´ng ÄÃ¡y Æ¡iâ€</i></b> Ä‘Æ°á»£c láº·p hai láº§n trong khá»• cuá»‘i, nhÆ° má»™t tiáº¿ng gá»i thiáº¿t tha bÃ¡o hiá»‡u sá»± trá»Ÿ vá» muá»™n mÃ ng cá»§a chá»§ thá»ƒ trá»¯ tÃ¬nh. NÃ³ nhÆ° chá»©a Ä‘á»±ng nhá»¯ng nuá»‘i tiáº¿c, lÆ°u luyáº¿n cá»§a tÃ¡c giáº£ khi trá»Ÿ vá» nÆ¡i Ä‘Ã¢y. NhÃ  thÆ¡ quay trá»Ÿ vá», nhÆ°ng máº¹ khÃ´ng cÃ²n. Ã”ng cá»‘ Ã´m cÃ¡t vÃ o lÃ²ng, khÃ³c thÆ°Æ¡ng vÃ  muá»‘n nÃ­u láº¡i má»™t chÃºt <b><i>â€œhÆ¡i thá»Ÿâ€</i></b> cá»§a ngÆ°á»i máº¹.</p>
        <p>- Thi sÄ© nháº­n ra sá»± tháº­t phÅ© phÃ ng: máº¹ Ä‘Ã£ máº¥t, giá»‘ng nhÆ° cÃ¡t trÃ´i tuá»™t qua tay Ã´ng cháº£y xuá»‘ng dÃ²ng dÃ²ng, khÃ´ng thá»ƒ á»Ÿ láº¡i. <b><i>â€œMáº¹â€</i></b> lÃ  hÃ¬nh áº£nh luÃ´n thÆ°á»ng trá»±c trong trÃ¡i tim cá»§a ngÆ°á»i con, nhá»› vá» quÃª hÆ°Æ¡ng lÃ  nhá»› Ä‘áº¿n máº¹ vá»›i biáº¿t bao ká»‰ niá»‡m, nhá»› vá» tÃ¬nh máº«u tá»­ thiÃªng liÃªng sÃ¢u náº·ng. NhÃ  thÆ¡ Ä‘Ã£ so sÃ¡nh hÃ¬nh áº£nh <b><i>â€œMáº¹â€</i></b> nhÆ° <b><i>â€œcÃ¡t khÃ´â€</i></b> qua Ä‘Ã³ ta tháº¥y Ä‘Æ°á»£c: máº¹ Ä‘Ã£ giÃ  nua khÃ´ hÃ©o, nhá» nhoi.</p>
        <p>- <b><i>â€œTÃ´i khÃ³câ€</i></b>, giá»t nÆ°á»›c máº¯t cá»§a sá»± thÆ°Æ¡ng xÃ³t cÅ©ng lÃ  giá»t nÆ°á»›c máº¯t cá»§a háº¡nh phÃºc.</p>
        <p>- Tá»« <b><i>â€œcháº£yâ€</i></b> á»Ÿ Ä‘áº§u bÃ i thÆ¡ Ä‘Æ°á»£c láº·p láº¡i. Giá» Ä‘Ã¢y sÃ´ng ÄÃ¡y khÃ´ng cháº£y vÃ o Ã´ng ná»¯a, mÃ  chÃ­nh Ã´ng cháº£y vÃ o sÃ´ng ÄÃ¡y. 
        <br>â†’ ÄÃ³ lÃ  sá»± há»“i Ä‘Ã¡p cá»§a con ngÆ°á»i xa quÃª giá» Ä‘Ã£ quay trá»Ÿ vá» bÃ¡o Ä‘Ã¡p quÃª hÆ°Æ¡ng, há»“i Ä‘Ã¡p láº¡i tÃ¬nh cáº£m cá»§a máº¹ giÃ , gá»£i sá»± áº¥m Ã¡p cá»§a tÃ¬nh ngÆ°á»i.</p>
        <p>- Tá»« lÃ¡y <b><i>â€œrÃ²ng rÃ²ngâ€</i></b> táº¡o nÃªn nhá»‹p Ä‘iá»‡u, cÅ©ng nhÆ° Ä‘ang xoÃ¡y sÃ¢u vÃ o ná»—i Ä‘au. Ta cÃ³ thá»ƒ hiá»ƒu theo chiá»u hÆ°á»›ng tÃ­ch cá»±c, Ä‘Ã³ lÃ  cÃ¡i káº¿t cá»§a khá»• thÆ¡ nhÆ° má»™t sá»± Ä‘oÃ n tá»¥ cá»§a con ngÆ°á»i xa quÃª, Ã´ng quá»³ xuá»‘ng, Ã¡p cÃ¡t, Ä‘oÃ n tá»¥ vá»›i quÃª hÆ°Æ¡ng sau bao ngÃ y xa cÃ¡ch.</p>
        <p>â‡’ <b><i>Káº¿t luáº­n</i></b>: SÃ´ng ÄÃ¡y hiá»‡n lÃªn qua 3 má»‘c thá»i gian: cÃ²n nhá», lÃºc lá»›n lÃªn Ä‘i xa quÃª vÃ  cuá»‘i cÃ¹ng lÃ  ngÃ y trá»Ÿ vá», Ä‘Æ°á»£c sáº¯p xáº¿p theo trÃ¬nh tá»± quÃ¡ khá»© - hiá»‡n táº¡i. HÃ¬nh tÆ°á»£ng áº¥y thá»ƒ hiá»‡n chiá»u sÃ¢u cá»§a ná»—i nhá»›, cÃ³ niá»m vui, ná»—i buá»“n khi xa quÃª. Qua Ä‘Ã³, tháº¥y Ä‘Æ°á»£c má»‘i quan há»‡ máº­t thiáº¿t cá»§a sÃ´ng ÄÃ¡y vá»›i tÃ¡c giáº£.</p>
        <div class="panel-actions">
          <button class="feature-btn" onclick="openImage('phan3.png', 'img-phan3')">ğŸ” Xem áº£nh</button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Divider III -->
<div class="section-divider slide-up animate-delay-6">
  <div class="divider-line">
    <span class="divider-text">III. Tá»•ng káº¿t</span>
  </div>
</div>

<!-- Section 5 -->
<div class="section section-5 slide-in-left animate-delay-8">
  <div class="intro">
    <h3>GiÃ¡ trá»‹ vÃ  Ã½ nghÄ©a cá»§a â€œSÃ´ng ÄÃ¡yâ€</h3>
  </div>
  <div class="controls" role="tablist" aria-label="Menu tá»•ng káº¿t">
    <button class="control-btn" data-target="conclusion" aria-expanded="false">Ná»™i dung</button>
    <button class="control-btn" data-target="artistic" aria-expanded="false">Nghá»‡ thuáº­t</button>
    <button class="control-btn" data-target="meaning" aria-expanded="false">Ã nghÄ©a</button>
  </div>

  <div id="conclusion" class="control-panel" aria-hidden="true">
    <div class="panel-content">
      <div class="panel-text">
        <h3>GiÃ¡ trá»‹ ná»™i dung</h3>
        <p>- BÃ i thÆ¡ <b><i>â€œSÃ´ng ÄÃ¡yâ€</i></b> cá»§a Nguyá»…n Quang Thiá»u lÃ  má»™t cÃ´ng trÃ¬nh vÄƒn há»c tiÃªu biá»ƒu vá» chá»§ Ä‘á» kÃ½ á»©c vÃ  quÃª hÆ°Æ¡ng. Qua ba pháº§n cáº¥u thÃ nh, tÃ¡c pháº©m tÃ¡i hiá»‡n hÃ nh trÃ¬nh cá»§a tÃ¡c giáº£ tá»« tuá»•i thÆ¡, qua nhá»¯ng nÄƒm thÃ¡ng xa quÃª, cho Ä‘áº¿n ngÃ y trá»Ÿ vá»:</p>
        <p>+ <strong><em>Pháº§n 1 - Tuá»•i thÆ¡</em></strong>: SÃ´ng ÄÃ¡y hiá»‡n lÃªn nhÆ° má»™t pháº§n khÃ´ng thá»ƒ tÃ¡ch rá»i cá»§a tuá»•i thÆ¡ tÃ¡c giáº£, gáº¯n liá»n vá»›i kÃ½ á»©c áº¥m Ã¡p vÃ  hÃ¬nh bÃ³ng ngÆ°á»i máº¹.</p>
        <p>+ <strong><em>Pháº§n 2 - Xa quÃª</em></strong>: Ná»—i nhá»› da diáº¿t Ä‘Æ°á»£c thá»ƒ hiá»‡n qua nhá»¯ng hÃ¬nh áº£nh ká»³ áº£o vÃ  Ä‘áº§y cáº£m xÃºc cho tháº¥y tÃ¡c giáº£ luÃ´n chá»‹u áº£nh hÆ°á»Ÿng cá»§a quÃª hÆ°Æ¡ng dÃ¹ á»Ÿ bao xa.</p>
        <p>+ <strong><em>Pháº§n 3 - Trá»Ÿ vá»</em></strong>: Sá»± trá»Ÿ vá» muá»™n mÃ ng cá»§a tÃ¡c giáº£ mang theo nhá»¯ng xÃºc cáº£m phá»©c táº¡p - vui vÃ  buá»“n, nháº¥t lÃ  khi nháº­n ra sá»± thay Ä‘á»•i cá»§a thá»i gian.</p>
      </div>
    </div>
  </div>

  <div id="artistic" class="control-panel" aria-hidden="true">
    <div class="panel-content">
      <div class="panel-text">
        <h3>GiÃ¡ trá»‹ nghá»‡ thuáº­t</h3>
        <p>- <strong><em>GiÃ¡ trá»‹ nghá»‡ thuáº­t</strong></em>: BÃ i thÆ¡ Ä‘Æ°á»£c viáº¿t theo thá»ƒ tá»± do, váº­n dá»¥ng linh hoáº¡t cÃ¡c phÆ°Æ¡ng thá»©c biá»ƒu Ä‘áº¡t nhÆ° hÃ¬nh áº£nh mang tÃ­nh biá»ƒu tÆ°á»£ng, so sÃ¡nh Ä‘á»™c Ä‘Ã¡o vÃ  phÃ©p láº·p giÃ u Ã¡m áº£nh; giá»ng Ä‘iá»‡u tráº§m láº¯ng, thiáº¿t tha káº¿t há»£p vá»›i ngÃ´n ngá»¯ giÃ u nháº¡c Ä‘iá»‡u, tinh táº¿.</p>
      </div>
    </div>
  </div>

  <div id="meaning" class="control-panel" aria-hidden="true">
    <div class="panel-content">
      <div class="panel-text">
        <h3>Ã nghÄ©a cá»§a bÃ i thÆ¡</h3>
        <p>- <strong><em> GiÃ¡ trá»‹ nhÃ¢n vÄƒn</strong></em>: BÃ i thÆ¡ ca ngá»£i tÃ¬nh máº«u tá»­, tÃ¬nh yÃªu quÃª hÆ°Æ¡ng vÃ  sá»± gáº¯n bÃ³ vá»›i cá»‘i nguá»“n - nhá»¯ng giÃ¡ trá»‹ vÄ©nh cá»­u cá»§a con ngÆ°á»i.</p>
        <p>- <strong><em> GiÃ¡ trá»‹ tÃ¢m lÃ½</strong></em>: Pháº£n Ã¡nh tÃ¢m lÃ½ cá»§a ngÆ°á»i ngoÃ i cuá»™c, ngÆ°á»i xa quÃª, nhá»¯ng ná»—i Ä‘au vÃ  khÃ¡t vá»ng Ä‘Æ°á»£c trá»Ÿ vá» nhá»¯ng vÃ¹ng kÃ½ á»©c thÃ¢n yÃªu.</p>
        <p>- <strong><em> Ã nghÄ©a xÃ£ há»™i</strong></em>: Thá»ƒ hiá»‡n má»‘i liÃªn há»‡ giá»¯a con ngÆ°á»i, quÃª hÆ°Æ¡ng vÃ  tá»± sáº¯c dÃ¢n tá»™c, kháº³ng Ä‘á»‹nh vai trÃ² cá»§a cá»™i nguá»“n trong hÃ¬nh thÃ nh con ngÆ°á»i.</p>
        <p>â†’ <strong><em> Káº¿t luáº­n</strong></em>: <b><i>â€œSÃ´ng ÄÃ¡yâ€</i></b> khÃ´ng chá»‰ lÃ  bÃ i thÆ¡ vá» kÃ½ á»©c vÃ  quÃª hÆ°Æ¡ng mÃ  cÃ²n lÃ  lá»i ca tá»¥ng tÃ¬nh yÃªu sÃ¢u sáº¯c cá»§a con ngÆ°á»i Ä‘á»‘i vá»›i nhá»¯ng giÃ¡ trá»‹ tinh tháº§n vÄ©nh cá»­u, khuyáº¿n khÃ­ch Ä‘á»™c giáº£ trÃ¢n trá»ng vÃ  trá»Ÿ vá» gáº§n gÅ©i hÆ¡n vá»›i cÃ¡i gá»‘c cá»§a mÃ¬nh.</p>
      </div>
    </div>
  </div>
</div>

<!-- Settings Modal -->
<div id="settingsModal" class="guide-modal settings-modal">
  <div class="guide-content">
    <h2>âš™ï¸ CÃ i Ä‘áº·t</h2>
    <div class="guide-section">
      <h3>ğŸ”¤ TÃ¹y chá»‰nh hiá»ƒn thá»‹</h3>
      <p>Äiá»u chá»‰nh kÃ­ch thÆ°á»›c chá»¯ Ä‘á»ƒ dá»… Ä‘á»c hÆ¡n:</p>
      <div class="settings-grid">
        <button onclick="changeTextSize(1.1)">A+</button>
        <button onclick="changeTextSize(0.9)">A-</button>
        <button onclick="toggleContrast()">ğŸŒ“ TÆ°Æ¡ng pháº£n</button>
        <button onclick="resetDisplay()">ğŸ”„ Äáº·t láº¡i</button>
      </div>
      <p id="previewText2" class="preview-text" style="margin-top: 16px; padding: 12px; background: rgba(255,255,255,0.06); border-radius: 6px; line-height: 1.6;">ÄÃ¢y lÃ  vÄƒn báº£n máº«u Ä‘á»ƒ xem trÆ°á»›c hiá»‡u á»©ng phÃ³ng to, thu nhá», tÆ°Æ¡ng pháº£n. HÃ£y thá»­ cÃ¡c nÃºt Ä‘á»ƒ tÃ¬m kÃ­ch thÆ°á»›c chá»¯ phÃ¹ há»£p vá»›i báº¡n.</p>
    </div>
    <div class="guide-section">
      <h3>ğŸ”Š CÃ i Ä‘áº·t Ã¢m thanh</h3>
      <p>Äiá»u chá»‰nh má»©c Ã¢m lÆ°á»£ng cho cÃ¡c Ä‘oáº¡n Ã¢m thanh:</p>
      <div class="audio-settings">
        <label for="volumeSlider2" style="display: block; margin-bottom: 8px; color: rgba(255,255,255,0.8); font-size: 1rem;">Má»©c Ã¢m lÆ°á»£ng: <span id="volumeValue2" style="font-weight: 600; color: rgb(77, 163, 255);">70</span>%</label>
        <input type="range" id="volumeSlider2" min="0" max="100" value="70" style="width: 100%; cursor: pointer; margin-bottom: 12px;" title="Äiá»u chá»‰nh Ã¢m lÆ°á»£ng">
        <button onclick="testAudio()" class="test-audio-btn">ğŸ”Š PhÃ¡t thá»­ Ã¢m thanh</button>
      </div>
    </div>
    <div class="guide-actions">
      <button class="guide-btn primary" onclick="closeSettings()">ÄÃ³ng</button>
    </div>
  </div>
</div>

<!-- Todo List Modal (Mobile) -->
<div id="todoModal" class="guide-modal todo-modal">
  <div class="guide-content">
    <h2>ğŸ“š Nhiá»‡m vá»¥ há»c táº­p</h2>
    <div class="todo-items">
      <label class="todo-item" data-panels="author,work">
        <input type="checkbox" class="todo-checkbox" />
        <span class="todo-text">TÃ¬m hiá»ƒu tÃ¡c giáº£ & tÃ¡c pháº©m</span>
      </label>
      <label class="todo-item" data-panels="content1,analysis1">
        <input type="checkbox" class="todo-checkbox" />
        <span class="todo-text">Pháº§n 1: KÃ½ á»©c tuá»•i thÆ¡</span>
      </label>
      <label class="todo-item" data-panels="content2,analysis2">
        <input type="checkbox" class="todo-checkbox" />
        <span class="todo-text">Pháº§n 2: Ná»—i nhá»› xa quÃª</span>
      </label>
      <label class="todo-item" data-panels="content3,analysis3">
        <input type="checkbox" class="todo-checkbox" />
        <span class="todo-text">Pháº§n 3: Trá»Ÿ vá» quÃª hÆ°Æ¡ng</span>
      </label>
      <label class="todo-item" data-panels="conclusion,artistic,meaning">
        <input type="checkbox" class="todo-checkbox" />
        <span class="todo-text">Tá»•ng káº¿t giÃ¡ trá»‹ bÃ i thÆ¡</span>
      </label>
    </div>
    <div class="guide-actions">
      <button class="guide-btn primary" onclick="closeTodoModal()">ÄÃ³ng</button>
    </div>
  </div>
</div>

<footer>
  <div class="footer-content">
    <div class="footer-contact">
      <a href="mailto:tranletuananh919@gmail.com" class="contact-icon" title="Email"><i class="fas fa-envelope"></i></a>
      <a href="https://facebook.com/tunabacata" target="_blank" class="contact-icon" title="Facebook"><i class="fab fa-facebook-f"></i></a>
      <a href="https://instagram.com/tunabaca" target="_blank" class="contact-icon" title="Instagram"><i class="fab fa-instagram"></i></a>
      <button class="contact-icon" title="CÃ i Ä‘áº·t" onclick="openSettings()"><i class="fas fa-cog"></i></button>
      <button class="contact-icon todo-mobile-btn" title="Nhiá»‡m vá»¥" onclick="openTodoModal()" style="display: none;">â˜‘ï¸</button>
    </div>
    <div class="footer-copyright">
      <p>&copy; 2026 SÃ´ng ÄÃ¡y | NhÃ³m CÃ´ng Nghá»‡ - 11A3 - THPT Kim LiÃªn</p>
    </div>
  </div>
</footer>

<script>
  // Audio management
  let currentAudio = null;
  let currentVolume = localStorage.getItem('audioVolume') || 70;

  history.scrollRestoration = 'manual';
  window.scrollTo(0, 0);
  
  function playAudio(filename){
    // Dá»«ng audio Ä‘ang phÃ¡t (náº¿u cÃ³)
    if (currentAudio) {
      currentAudio.pause();
      currentAudio.currentTime = 0;
    }
    // Táº¡o vÃ  phÃ¡t audio má»›i
    currentAudio = new Audio(filename);
    currentAudio.volume = currentVolume / 100;
    currentAudio.play().catch(err => {
      console.error('Lá»—i khi phÃ¡t audio:', err);
      alert('KhÃ´ng thá»ƒ phÃ¡t file audio. Kiá»ƒm tra xem file ' + filename + ' cÃ³ tá»“n táº¡i khÃ´ng.');
    });
  }

  function stopAudio(){
    if (currentAudio) {
      currentAudio.pause();
      currentAudio.currentTime = 0;
    }
  }

  function testAudio(){
    playAudio('audiomau.mp3');
  }

  function setVolume(value){
    currentVolume = value;
    localStorage.setItem('audioVolume', value);
    document.getElementById('volumeValue').textContent = value;
    if (currentAudio) {
      currentAudio.volume = value / 100;
    }
  }

  // Control button interactions - toggle panels
  document.querySelectorAll('.control-btn').forEach(btn=>{
    btn.addEventListener('click', ()=>{
      const targetId = btn.dataset.target;
      const panel = document.getElementById(targetId);
      const isOpen = panel.classList.contains('open');
      
      if (isOpen) {
        panel.classList.remove('open');
        panel.setAttribute('aria-hidden','true');
        btn.setAttribute('aria-expanded','false');
      } else {
        panel.classList.add('open');
        panel.setAttribute('aria-hidden','false');
        btn.setAttribute('aria-expanded','true');
      }
    });
  });



  function openImage(src, imgClass = ''){
    const modal = document.getElementById('imgModal');
    const modalImg = document.getElementById('imgModalImg');
    const closeBtn = document.querySelector('.img-modal-close');
    
    if (!modal || !modalImg) {
      window.open(src, '_blank');
      return;
    }
    
    // Update image
    modalImg.src = src;
    modalImg.className = '';
    if (imgClass) {
      modalImg.classList.add(imgClass);
    }
    
    // Update close button
    if (closeBtn) {
      closeBtn.className = 'img-modal-close';
      if (imgClass) {
        closeBtn.classList.add(`close-${imgClass}`);
      }
    } else {
      console.error('Close button element not found!');
    }
    
    modal.setAttribute('aria-hidden', 'false');
    modal.classList.add('visible');
    document.body.classList.add('no-scroll');
  }

  function closeImage(){
    const modal = document.getElementById('imgModal');
    const modalImg = document.getElementById('imgModalImg');
    const closeBtn = document.querySelector('.img-modal-close');
    
    if (!modal) return;
    
    modal.classList.remove('visible');
    modal.setAttribute('aria-hidden', 'true');
    document.body.classList.remove('no-scroll');
    
    setTimeout(()=>{ 
      if (modalImg) { 
        modalImg.src = ''; 
        modalImg.className = ''; 
      } 
      if (closeBtn) {
        closeBtn.className = 'img-modal-close';
      }
    }, 300);
  }

  function downloadExcerpt(){
    const text = `
    SÃ´ng ÄÃ¡y cháº£y vÃ o Ä‘á»i tÃ´i
    NhÆ° máº¹ tÃ´i gÃ¡nh náº·ng ráº½ vÃ o ngÃµ sau má»—i buá»•i chiá»u Ä‘i lÃ m vá» váº¥t váº£
    TÃ´i dá»¥i máº·t vÃ o lÆ°ng ngÆ°á»i Ä‘áº«m má»“ hÃ´i mÃ¡t má»™t máº£nh sÃ´ng Ä‘Ãªm
    NÄƒm thÃ¡ng sá»‘ng xa quÃª tÃ´i nhÆ° ngÆ°á»i bÆ°á»›c há»¥t
    CÆ¡n mÆ¡ vang lÃªn tiáº¿ng cÃ¡ quáº«y tuá»™t cÃ¢u nhÆ° má»™t tiáº¿ng náº¥c
    Ã‚m tháº§m vá»¡ trong tÃ´i, Ã¢m tháº§m vá»¡ cuá»‘i nguá»“n
    Tá»a mÃ¡t xuá»‘ng cÆ¡n Ä‘au tÃ´i lÃ  tÃ³c máº¹ báº¿n mÃ²n Ä‘á»©ng Ä‘á»£i
    Má»™t cÃ¢y ngÃ´ cuá»‘i vá»¥ khÃ´ gáº§y
    Suá»‘t Ä‘á»i buá»“n trong tiáº¿ng lÃ¡ reo.
    Nhá»¯ng chiá»u xa quÃª tÃ´i mong dÃ²ng sÃ´ng dÃ¢ng lÃªn ngang trá»i cho tÃ´i Ä‘Æ°á»£c nhÃ¬n tháº¥y
    Cho Ä‘Ã´i máº¯t nhá»› thÆ°Æ¡ng cá»§a tÃ´i nhÆ° hai há»‘c Ä‘áº¥t ven bá», nÆ¡i nhá»¯ng chÃº bá»‘ng Ä‘áº¿n lÃ m tá»• Ä‘Æ°á»£c giÃ n dá»¥a nÆ°á»›c mÆ°a sÃ´ng.
    SÃ´ng ÄÃ¡y Æ¡i! Chiá»u nay tÃ´i trá»Ÿ láº¡i
    Nhá»¯ng cÃ¡nh buá»“m cá»• tÃ­ch Ä‘Ã£ bay xa vá» má»™t niá»m tá»©c tÆ°á»Ÿi
    Em Ä‘Ã£ mang Ä‘Ã´i mÃ´i mÃ u dÃ¢u chÃ­n sang Ä‘Ã² má»™t ngÃ y sÃ´ng váº¯ng nÆ°á»›c
    SÃ´ng ÄÃ¡y Æ¡i, sÃ´ng ÄÃ¡y Æ¡iâ€¦ chiá»u nay tÃ´i trá»Ÿ láº¡i
    Máº¹ tÃ´i Ä‘Ã£ giÃ  nhÆ° cÃ¡t bÃªn bá»
    Ã”i mÃ¹i cÃ¡t khÃ´, mÃ¹i tÃ³c máº¹ tÃ´i
    TÃ´i quÃ¬ xuá»‘ng vá»‘c cÃ¡t áº¥p vÃ o máº·t
    TÃ´i khÃ³c.
    CÃ¡t tá»« máº·t tÃ´i cháº£y xuá»‘ng dÃ²ng dÃ²ng.
    `;
    const blob = new Blob([text], {type:'text/plain;charset=utf-8'});
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a'); a.href = url; a.download = 'doan_trich.txt'; document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);
  }



  function changeTextSize(factor){
    const current = parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--base-scale')||1);
    const next = current * factor;
    document.documentElement.style.setProperty('--base-scale', next);
    document.documentElement.style.setProperty('--page-scale', next);
  }

  function toggleContrast(){ 
    document.body.classList.toggle('high-contrast'); 
  }

  function resetDisplay(){
    document.documentElement.style.setProperty('--base-scale', 1);
    document.documentElement.style.setProperty('--page-scale', 1);
    document.body.classList.remove('high-contrast');
  }

  // Guide pagination state
  let currentGuidePage = 1;
  const totalGuidePages = 3;

  function updateGuideButtons() {
    const skipBtn = document.getElementById('guideSkipBtn');
    const backBtn = document.getElementById('guideBackBtn');
    const nextBtn = document.getElementById('guideNextBtn');
    const startBtn = document.getElementById('guideStartBtn');
    
    if (skipBtn) {
      skipBtn.style.pointerEvents = currentGuidePage < totalGuidePages ? 'auto' : 'none';
      skipBtn.style.display = currentGuidePage < totalGuidePages ? '' : 'none';
    }
    
    if (backBtn) {
      backBtn.style.pointerEvents = currentGuidePage > 1 ? 'auto' : 'none';
      backBtn.style.display = currentGuidePage > 1 ? '' : 'none';
    }
    
    if (nextBtn && startBtn) {
      if (currentGuidePage < totalGuidePages) {
        nextBtn.style.pointerEvents = 'auto';
        nextBtn.style.display = '';
        startBtn.style.pointerEvents = 'none';
        startBtn.style.display = 'none';
      } else {
        nextBtn.style.pointerEvents = 'none';
        nextBtn.style.display = 'none';
        startBtn.style.pointerEvents = 'auto';
        startBtn.style.display = '';
      }
    }
  }

  // Helper function to animate scroll
  function animateScrollTo(element, targetScroll, duration, delay = 0) {
    return new Promise((resolve) => {
      setTimeout(() => {
        const startScroll = element.scrollTop;
        const startTime = Date.now();
        const easeInOutCubic = (t) => t < 0.5 ? 4 * t * t * t : 1 - Math.pow(-2 * t + 2, 3) / 2;
        
        function scroll() {
          const elapsed = Date.now() - startTime;
          const progress = Math.min(elapsed / duration, 1);
          const easeProgress = easeInOutCubic(progress);
          element.scrollTop = startScroll + (targetScroll - startScroll) * easeProgress;
          
          if (progress < 1) {
            requestAnimationFrame(scroll);
          } else {
            resolve();
          }
        }
        
        requestAnimationFrame(scroll);
      }, delay);
    });
  }

  function showGuidePage(pageNum) {
    if (pageNum < 1 || pageNum > totalGuidePages) return;
    
    // Scroll modal content to top before doing anything
    const guideModal = document.getElementById('guideModal');
    if (guideModal) {
      const guideContent = guideModal.querySelector('.guide-content');
      if (guideContent) {
        guideContent.scrollTop = 0;
      }
    }
    
    const isNext = pageNum > currentGuidePage;
    
    // Hide all pages
    const pages = document.querySelectorAll('.guide-page');
    pages.forEach(page => {
      page.classList.add('hidden');
      page.classList.remove('slide-next', 'slide-prev', 'animating');
    });
    
    // Show the new page with animation
    const newPage = document.querySelector(`.guide-page[data-page="${pageNum}"]`);
    if (newPage) {
      newPage.classList.remove('hidden');
      // Trigger reflow to enable animation
      void newPage.offsetWidth;
      // Add animation direction class
      newPage.classList.add(isNext ? 'slide-next' : 'slide-prev');
      
      // Get guide content for scroll animation
      const guideModal = newPage.closest('.guide-modal');
      const guideContent = guideModal ? guideModal.querySelector('.guide-content') : null;
      
      // Add animating class to trigger staggered child animations + scroll
      setTimeout(() => {
        newPage.classList.add('animating');
        
        // Update button visibility after animation class is added
        currentGuidePage = pageNum;
        updateGuideButtons();
        
        // Start scroll animation when elements begin animating
        if (guideContent) {
          const maxScroll = Math.max(0, guideContent.scrollHeight - guideContent.clientHeight);
          
          // Page-specific scroll timing
          let scrollDelay = 0;
          let scrollDuration = 0;
          let scrollUpDelay = 0;
          
          if (pageNum === 1) {
            scrollDelay = 800;
            scrollDuration = 700;
            scrollUpDelay = 0;
          } else if (pageNum === 2) {
            scrollDelay = 900;
            scrollDuration = 1000;
            scrollUpDelay = 250;
          } else if (pageNum === 3) {
            scrollDelay = 900;
            scrollDuration = 900;
            scrollUpDelay = 250;
          }
          
          if (scrollDuration > 0) {
            // Scroll down
            animateScrollTo(guideContent, maxScroll, scrollDuration, scrollDelay).then(() => {
              // Then scroll back to top
              setTimeout(() => {
                animateScrollTo(guideContent, 0, 1500, 0);
              }, scrollUpDelay);
            });
          }
        }
      }, 50);
    }
  }

  function goToNextPage() {
    if (currentGuidePage < totalGuidePages) {
      showGuidePage(currentGuidePage + 1);
    }
  }

  function goToPreviousPage() {
    if (currentGuidePage > 1) {
      showGuidePage(currentGuidePage - 1);
    }
  }

  // Guide modal functions
  function openGuide(){
    const modal = document.getElementById('guideModal');
    if (modal) {
      modal.classList.add('visible');
      document.body.classList.add('no-scroll');
    }
    // Reset to first page
    currentGuidePage = 0; // Set to 0 so first page is "next"
    showGuidePage(1);
  }

  function closeGuide(){
    stopAudio();
    const modal = document.getElementById('guideModal');
    if (modal) {
      modal.classList.remove('visible');
      document.body.classList.remove('no-scroll');
    }
    
    // Trigger animations and auto-scroll experience after modal fades out
    setTimeout(() => {
      // Enable pointer events for progress river and todo list
      const progressRiver = document.querySelector('.progress-river');
      if (progressRiver) {
        progressRiver.style.pointerEvents = 'auto';
      }
      
      const todoList = document.querySelector('.todo-list');
      if (todoList) {
        todoList.style.pointerEvents = 'auto';
      }
      
      // Start animations immediately (0ms)
      document.body.classList.add('animations-ready');
      
      // Calculate total scroll distance
      const documentHeight = document.documentElement.scrollHeight;
      const viewportHeight = window.innerHeight;
      const maxScroll = Math.max(0, documentHeight - viewportHeight);
      
      // Manual smooth scroll function
      function smoothScrollTo(target, duration, delay = 0) {
        return new Promise((resolve) => {
          setTimeout(() => {
            const start = window.scrollY;
            const distance = target - start;
            const startTime = Date.now();
            
            function scroll() {
              const elapsed = Date.now() - startTime;
              const progress = Math.min(elapsed / duration, 1);
              window.scrollTo(0, start + distance * progress);
              
              if (progress < 1) {
                requestAnimationFrame(scroll);
              } else {
                resolve();
              }
            }
            
            scroll();
          }, delay);
        });
      }
      
      // Scroll down starts at 2700ms (when section 3 starts), duration 2250ms
      const isMobile = window.innerWidth <= 576;
      let scrollDownStartDelay, scrollDownDuration, scrollUpStartDelay;
      
      if (isMobile) {
        // Mobile: Scroll down starts early for smooth scrolling (1500ms)
        // Scroll down ends at 3900ms (1500 + 2400)
        // Scroll up starts shortly after (900ms delay from scroll complete)
        scrollDownStartDelay = 1500;
        scrollDownDuration = 2400;  // Longer duration for smooth scrolling
        scrollUpStartDelay = 1500;
      } else {
        // Desktop: Original timing
        scrollDownStartDelay = 2700;
        scrollDownDuration = 2250;
        scrollUpStartDelay = 0;
      }
      
      // Scroll down
      smoothScrollTo(maxScroll, scrollDownDuration, scrollDownStartDelay).then(() => {
        // After scroll down completes, scroll back to top
        if (isMobile) {
          // Mobile: Scroll up when footer p starts animating
          smoothScrollTo(0, 1000, scrollUpStartDelay);
        } else {
          // Desktop: Scroll down ends at 4950ms, footer p ends at 6500ms
          // So delay scroll up by 1550ms to start at 6500ms
          smoothScrollTo(0, 1000, 1550);
        }
      });
      
    }, 400);
  }

  // Settings modal functions
  function openSettings(){
    const modal = document.getElementById('settingsModal');
    if (modal) {
      modal.classList.add('visible', 'animating');
      document.body.classList.add('no-scroll');
      
      // Reset scroll position to top immediately
      const guideContent = modal.querySelector('.guide-content');
      if (guideContent) {
        guideContent.scrollTop = 0;
      }
      
      const volumeSlider2 = document.getElementById('volumeSlider2');
      if (volumeSlider2) {
        volumeSlider2.value = currentVolume;
        document.getElementById('volumeValue2').textContent = currentVolume;
        volumeSlider2.addEventListener('input', (e) => {
          setVolume(e.target.value);
          document.getElementById('volumeValue2').textContent = e.target.value;
        });
      }
      
      // Add scroll animation on mobile
      const isMobile = window.innerWidth <= 576;
      if (isMobile) {
        // Manual smooth scroll function for settings modal
        function smoothScrollSettingsTo(target, duration, delay = 0) {
          return new Promise((resolve) => {
            setTimeout(() => {
              const guideContent = modal.querySelector('.guide-content');
              if (!guideContent) {
                resolve();
                return;
              }
              const start = guideContent.scrollTop;
              const startTime = performance.now();
              
              function scroll(currentTime) {
                const elapsed = currentTime - startTime;
                const progress = Math.min(elapsed / duration, 1);
                guideContent.scrollTop = start + (target - start) * progress;
                
                if (progress < 1) {
                  requestAnimationFrame(scroll);
                } else {
                  guideContent.scrollTop = target;
                  resolve();
                }
              }
              requestAnimationFrame(scroll);
            }, delay);
          });
        }
        
        // Wait for layout to calculate, then perform scroll animation
        setTimeout(() => {
          const guideContent = modal.querySelector('.guide-content');
          if (guideContent) {
            // Force reflow to ensure dimensions are calculated
            void guideContent.offsetHeight;
            const maxScroll = Math.max(0, guideContent.scrollHeight - guideContent.clientHeight);
            
            if (maxScroll > 0) {
              // Scroll down starting at 900ms, duration 700ms (fast scroll)
              smoothScrollSettingsTo(maxScroll, 700, 900).then(() => {
                // Scroll up starting 600ms after scroll down completes (at 2200ms total)
                smoothScrollSettingsTo(0, 1000, 600);
              });
            }
          }
        }, 100);
      }
    }
  }

  function closeSettings(){
    stopAudio();
    const modal = document.getElementById('settingsModal');
    if (modal) {
      modal.classList.remove('visible', 'animating');
      document.body.classList.remove('no-scroll');
    }
  }

  // Todo modal functions
  function openTodoModal(){
    const modal = document.getElementById('todoModal');
    if (modal) {
      modal.classList.add('visible');
      document.body.classList.add('no-scroll');
      
      // Trigger animation after brief delay
      setTimeout(() => {
        modal.classList.add('animating');
      }, 50);
    }
  }

  function closeTodoModal(){
    const modal = document.getElementById('todoModal');
    if (modal) {
      modal.classList.remove('visible', 'animating');
      document.body.classList.remove('no-scroll');
    }
  }

  // Progress River Tracking
  const totalControlButtons = document.querySelectorAll('.control-btn').length || 1;
  const openedPanels = new Set();

  function updateProgressRiver() {
    const openCount = openedPanels.size;
    const percent = Math.min((openCount / totalControlButtons) * 100, 100);
    const fullHeight = 320;
    const fillHeight = (percent / 100) * fullHeight;
    let y = Math.round(fullHeight - fillHeight);
    if (y < 0) y = 0;

    const waterRect = document.getElementById('waterRect');
    const waterWave = document.getElementById('waterWave');
    if (waterRect) {
      waterRect.setAttribute('y', y);
      waterRect.setAttribute('height', Math.max(0, Math.round(fillHeight)));
      waterRect.setAttribute('x', 0);
      waterRect.setAttribute('width', 50);
    }
    if (waterWave) {
      const waveY = Math.max(0, y + 4);
      const waveD = `M0,${waveY} Q12,${waveY - 4} 25,${waveY} Q38,${waveY - 4} 50,${waveY} L50,320 L0,320 Z`;
      waterWave.setAttribute('d', waveD);
    }

    const progressLabel = document.querySelector('.progress-label');
    if (progressLabel) progressLabel.textContent = Math.round(percent) + '%';
  }

  // Track button clicks - count immediately on first open
  document.querySelectorAll('.control-btn').forEach((btn) => {
    btn.addEventListener('click', () => {
      const targetId = btn.dataset.target;
      const panel = document.getElementById(targetId);

      // Toggle handled elsewhere; here we only register the first-open event immediately
      if (targetId && !openedPanels.has(targetId)) {
        openedPanels.add(targetId);
        updateProgressRiver();
        updateTodoList();
      }
    });
  });
  
  // Update todo list checkboxes based on opened panels
  function updateTodoList() {
    const todoItems = document.querySelectorAll('.todo-item');
    todoItems.forEach(item => {
      const panelIds = item.dataset.panels.split(',');
      const allOpened = panelIds.every(id => openedPanels.has(id));
      const checkbox = item.querySelector('input[type="checkbox"]');
      if (allOpened) {
        checkbox.checked = true;
      }
    });
  }

  // Handle todo item clicks - scroll to section and highlight buttons
  document.querySelectorAll('.todo-item').forEach(todoItem => {
    todoItem.addEventListener('click', (e) => {
      // Get panel IDs from data attribute
      const panelIds = todoItem.dataset.panels.split(',').map(id => id.trim());
      
      // Find the first section that contains these panels
      let targetSection = null;
      for (const panelId of panelIds) {
        const panel = document.getElementById(panelId);
        if (panel) {
          const section = panel.closest('section, .section-1, .section-2, .section-3, .section-4, .section-5, .section-divider');
          if (section && section.classList.contains('section-1') || section.classList.contains('section-2') 
              || section.classList.contains('section-3') || section.classList.contains('section-4') 
              || section.classList.contains('section-5')) {
            targetSection = section;
            break;
          }
        }
      }

      // Scroll to section centered in viewport
      if (targetSection) {
        const sectionRect = targetSection.getBoundingClientRect();
        const scrollTop = window.scrollY + sectionRect.top - (window.innerHeight / 2) + (sectionRect.height / 2);
        window.scrollTo({ top: scrollTop, behavior: 'smooth' });

        // Highlight control buttons after scroll
        setTimeout(() => {
          panelIds.forEach(panelId => {
            const trimmedId = panelId.trim();
            const btn = document.querySelector(`[data-target="${trimmedId}"]`);
            if (btn) {
              btn.style.setProperty('opacity', '1', 'important');
              btn.style.setProperty('box-shadow', '0 0 12px rgba(255, 255, 255, 0.6), 0 0 25px rgba(255, 255, 255, 0.3), inset 0 0 10px rgba(255, 255, 255, 0.2)', 'important');
              btn.style.setProperty('background', 'rgba(255, 255, 255, 0.1)', 'important');
              
              setTimeout(() => {
                btn.style.opacity = '';
                btn.style.boxShadow = '';
                btn.style.background = '';
              }, 800);
            }
          });
        }, 300);
        // Close todo modal on mobile after scrolling
        if (window.innerWidth <= 576) {
          setTimeout(() => {
            closeTodoModal();
          }, 500);
        }
      }

      // Prevent checkbox default toggle behavior
      e.preventDefault();
    });

    // Prevent direct checkbox clicks from toggling
    const checkbox = todoItem.querySelector('.todo-checkbox');
    if (checkbox) {
      checkbox.addEventListener('click', (e) => {
        e.stopPropagation();
        e.preventDefault();
      });
      checkbox.addEventListener('change', (e) => {
        e.preventDefault();
      });
    }
  });
  
  // Page load
  window.addEventListener('load', () => {
    localStorage.removeItem('guideViewed');
    window.scrollTo(0, 0);
    
    if (!localStorage.getItem('guideViewed')) {
      openGuide();
      localStorage.setItem('guideViewed', 'true');
    }
    
    const volumeSlider = document.getElementById('volumeSlider');
    if (volumeSlider) {
      volumeSlider.value = currentVolume;
      volumeSlider.addEventListener('input', (e) => setVolume(e.target.value));
    }
    document.getElementById('volumeValue').textContent = currentVolume;
    document.documentElement.style.setProperty('--page-scale', 1);
    
    try { updateProgressRiver(); } catch (e) { }
    try { updateTodoList(); } catch (e) { }
  });
</script>

<!-- Image modal -->
<div id="imgModal" class="img-modal" role="dialog" aria-hidden="true">
  <div class="img-modal-overlay" onclick="closeImage()"></div>
  <div class="img-modal-content" role="document">
    <div class="img-wrapper">
      <img id="imgModalImg" src="" alt="Full view" />
      <button class="img-modal-close" aria-label="ÄÃ³ng áº£nh" onclick="closeImage()">âœ•</button>
    </div>
  </div>
</div>

<!-- Welcome Guide Modal -->
<div id="guideModal" class="guide-modal">
  <div class="guide-content">
    <!-- Page 1: ChÃ o má»«ng & Cáº¥u trÃºc ná»™i dung -->
    <div class="guide-page" data-page="1">
      <h2>ğŸŒŠ SÃ´ng ÄÃ¡y - DÃ²ng cháº£y kÃ½ á»©c</h2>
      <div class="guide-section">
        <h3>ğŸ‘‹ ChÃ o má»«ng</h3>
        <p>ÄÃ¢y lÃ  má»™t tráº£i nghiá»‡m há»c táº­p tÆ°Æ¡ng tÃ¡c vá»›i tÃ¡c pháº©m â€œSÃ´ng ÄÃ¡yâ€ cá»§a Nguyá»…n Quang Thiá»u. Khi báº¥m nÃºt [Báº¯t Ä‘áº§u], trang sáº½ tá»± Ä‘á»™ng hiá»ƒn thá»‹ ná»™i dung theo tá»«ng pháº§n, giÃºp báº¡n khÃ¡m phÃ¡ tá»«ng khÃ­a cáº¡nh cá»§a bÃ i thÆ¡ má»™t cÃ¡ch dá»… dÃ ng vÃ  thÃº vá»‹.</p>
      </div>

      <div class="guide-section">
        <h3>ğŸ“š Cáº¥u trÃºc ná»™i dung</h3>
        <ul>
          <li>Pháº§n I - TÃ¬m hiá»ƒu chung: TÃ¡c giáº£ Nguyá»…n Quang Thiá»u vÃ  tÃ¡c pháº©m â€œSÃ´ng ÄÃ¡yâ€.</li>
          <li>Pháº§n II - TÃ¬m hiá»ƒu chi tiáº¿t: 3 Ä‘oáº¡n thÆ¡ chÃ­nh vá»›i phÃ¢n tÃ­ch sÃ¢u sáº¯c.</li>
          <li>Pháº§n III - Tá»•ng káº¿t: GiÃ¡ trá»‹ nghá»‡ thuáº­t vÃ  Ã½ nghÄ©a cá»§a bÃ i thÆ¡.</li>
        </ul>
      </div>
      <div class="guide-actions">
        <button class="guide-btn secondary" id="guideSkipBtn" onclick="closeGuide()">Äá»ƒ sau</button>
        <button class="guide-btn secondary" id="guideBackBtn" onclick="goToPreviousPage()">Quay láº¡i</button>
        <button class="guide-btn secondary" id="guideNextBtn" onclick="goToNextPage()">Tiáº¿p</button>
        <button class="guide-btn primary" id="guideStartBtn" onclick="closeGuide()">Báº¯t Ä‘áº§u</button>
      </div>
    </div>

    <!-- Page 2: Theo dÃµi tiáº¿n Ä‘á»™ & TÆ°Æ¡ng tÃ¡c & TÃ­nh nÄƒng -->
    <div class="guide-page hidden" data-page="2">
      <h2>ğŸŒŠ SÃ´ng ÄÃ¡y - DÃ²ng cháº£y kÃ½ á»©c</h2>
      <div class="guide-section">
        <h3>âœ… Theo dÃµi tiáº¿n Ä‘á»™ há»c táº­p</h3>
        <ul>
          <li><strong>ğŸ“‹ Danh sÃ¡ch nhiá»‡m vá»¥ (trÃ¡i):</strong> 5 nhiá»‡m vá»¥ cáº§n hoÃ n thÃ nh. Tá»± Ä‘á»™ng Ä‘Ã¡nh dáº¥u khi má»Ÿ táº¥t cáº£ ná»™i dung liÃªn quan.</li>
          <li><strong>ğŸŒŠ DÃ²ng sÃ´ng tiáº¿n Ä‘á»™ (pháº£i):</strong> Má»±c nÆ°á»›c tÄƒng dáº§n (0% â†’ 100%) khi khÃ¡m phÃ¡ ná»™i dung tá»« cÃ¡c pháº§n khÃ¡c nhau.</li>
          <li><strong>âœ¨ Highlight Ä‘á»™ng:</strong> Báº¥m danh sÃ¡ch nhiá»‡m vá»¥ â†’ cÃ¡c nÃºt tÆ°Æ¡ng á»©ng phÃ¡t sÃ¡ng Ä‘á»ƒ dáº«n dáº¯t.</li>
        </ul>
      </div>

      <div class="guide-section">
        <h3>ğŸ¯ CÃ¡ch tÆ°Æ¡ng tÃ¡c</h3>
        <ul>
          <li>Báº¥m [TÃ¡c giáº£], [Ná»™i dung], [PhÃ¢n tÃ­ch] Ä‘á»ƒ má»Ÿ/Ä‘Ã³ng tá»«ng panel ná»™i dung.</li>
          <li>Báº¥m má»¥c trong danh sÃ¡ch nhiá»‡m vá»¥ â†’ trang cuá»™n Ä‘áº¿n pháº§n Ä‘Ã³ + highlight cÃ¡c nÃºt.</li>
          <li>Má»—i láº§n má»Ÿ ná»™i dung liÃªn quan má»›i, tiáº¿n Ä‘á»™ sÃ´ng cáº­p nháº­t tá»± Ä‘á»™ng.</li>
        </ul>
      </div>

      <div class="guide-section">
        <h3>ğŸ”Š TÃ­nh nÄƒng Ä‘a phÆ°Æ¡ng tiá»‡n</h3>
        <ul>
          <li>ğŸµ <strong>Ã‚m thanh:</strong> PhÃ¡t cÃ¡c Ä‘oáº¡n thÆ¡ Ä‘Æ°á»£c Ä‘á»c vá»›i Ä‘iá»u chá»‰nh Ã¢m lÆ°á»£ng.</li>
          <li>ğŸ–¼ï¸ <strong>áº¢nh minh há»a:</strong> PhÃ³ng to hÃ¬nh áº£nh liÃªn quan Ä‘áº¿n tá»«ng pháº§n thÆ¡.</li>
          <li>ğŸ“¥ <strong>Táº£i bÃ i thÆ¡:</strong> Táº£i toÃ n bá»™ ná»™i dung dáº¡ng file .txt Ä‘á»ƒ sá»­ dá»¥ng offline.</li>
        </ul>
      </div>
      <div class="guide-actions">
        <button class="guide-btn secondary" id="guideSkipBtn" onclick="closeGuide()">Äá»ƒ sau</button>
        <button class="guide-btn secondary" id="guideBackBtn" onclick="goToPreviousPage()">Quay láº¡i</button>
        <button class="guide-btn secondary" id="guideNextBtn" onclick="goToNextPage()">Tiáº¿p</button>
        <button class="guide-btn primary" id="guideStartBtn" onclick="closeGuide()" style="display: none;">Báº¯t Ä‘áº§u</button>
      </div>
    </div>

    <!-- Page 3: TÃ¹y chá»‰nh & CÃ i Ä‘áº·t Ã¢m thanh -->
    <div class="guide-page hidden" data-page="3">
      <h2>ğŸŒŠ SÃ´ng ÄÃ¡y - DÃ²ng cháº£y kÃ½ á»©c</h2>
      <div class="guide-section">
        <h3>âš™ï¸ TÃ¹y chá»‰nh hiá»ƒn thá»‹</h3>
        <p>Äiá»u chá»‰nh giao diá»‡n phÃ¹ há»£p vá»›i sá»Ÿ thÃ­ch cá»§a báº¡n:</p>
        <div class="settings-grid">
          <button onclick="changeTextSize(1.1)">A+</button>
          <button onclick="changeTextSize(0.9)">A-</button>
          <button onclick="toggleContrast()">TÆ°Æ¡ng pháº£n</button>
          <button onclick="resetDisplay()">Äáº·t láº¡i</button>
        </div>
        <p id="previewText" class="preview-text" style="margin-top: 16px; padding: 12px; background: rgba(255,255,255,0.06); border-radius: 6px; line-height: 1.6;">ÄÃ¢y lÃ  vÄƒn báº£n máº«u Ä‘á»ƒ xem trÆ°á»›c hiá»‡u á»©ng phÃ³ng to (A+), thu nhá» (A-), tÆ°Æ¡ng pháº£n. HÃ£y thá»­ cÃ¡c nÃºt trÃªn Ä‘á»ƒ Ä‘iá»u chá»‰nh kÃ­ch thÆ°á»›c chá»¯ vÃ  Ä‘á»™ tÆ°Æ¡ng pháº£n.</p>
      </div>

      <div class="guide-section">
        <h3>ğŸ”Š CÃ i Ä‘áº·t Ã¢m thanh</h3>
        <p>Äiá»u chá»‰nh Ã¢m lÆ°á»£ng cho cÃ¡c Ä‘oáº¡n thÆ¡ Ä‘Æ°á»£c Ä‘á»c:</p>
        <div class="audio-settings">
          <label for="volumeSlider" style="display: block; margin-bottom: 8px; color: rgba(255,255,255,0.8); font-size: 1rem;">Ã‚m lÆ°á»£ng: <span id="volumeValue" style="font-weight: 600; color: rgb(77, 163, 255);">70</span>%</label>
          <input type="range" id="volumeSlider" min="0" max="100" value="70" style="width: 100%; cursor: pointer; margin-bottom: 12px;" title="Äiá»u chá»‰nh má»©c Ã¢m">
          <button onclick="testAudio()" class="test-audio-btn">ğŸ”Š PhÃ¡t thá»­ Ã¢m thanh</button>
        </div>
      </div>
      <div class="guide-actions">
        <button class="guide-btn secondary" id="guideSkipBtn" onclick="closeGuide()" style="display: none;">Äá»ƒ sau</button>
        <button class="guide-btn secondary" id="guideBackBtn" onclick="goToPreviousPage()">Quay láº¡i</button>
        <button class="guide-btn secondary" id="guideNextBtn" onclick="goToNextPage()" style="display: none;">Tiáº¿p</button>
        <button class="guide-btn primary" id="guideStartBtn" onclick="closeGuide()">Báº¯t Ä‘áº§u</button>
      </div>
    </div>

    <!-- Buttons container for page 2,3 (moved inside pages) -->
  </div>
</div>

<!-- Settings Modal -->
<div id="settingsModal" class="guide-modal settings-modal">
  <div class="guide-content">
    <h2>âš™ï¸ CÃ i Ä‘áº·t</h2>
    
    <div class="guide-section">
      <h3>ğŸ”¤ TÃ¹y chá»‰nh hiá»ƒn thá»‹</h3>
      <p>Äiá»u chá»‰nh kÃ­ch thÆ°á»›c chá»¯ Ä‘á»ƒ dá»… Ä‘á»c hÆ¡n:</p>
      <div class="settings-grid">
        <button onclick="changeTextSize(1.1)">A+</button>
        <button onclick="changeTextSize(0.9)">A-</button>
        <button onclick="toggleContrast()">TÆ°Æ¡ng pháº£n</button>
        <button onclick="resetDisplay()">Äáº·t láº¡i</button>
      </div>
      <p id="previewText2" class="preview-text" style="margin-top: 16px; padding: 12px; background: rgba(255,255,255,0.06); border-radius: 6px; line-height: 1.6;">ÄÃ¢y lÃ  vÄƒn báº£n máº«u Ä‘á»ƒ xem trÆ°á»›c hiá»‡u á»©ng phÃ³ng to, thu nhá», tÆ°Æ¡ng pháº£n. HÃ£y thá»­ cÃ¡c nÃºt Ä‘á»ƒ tÃ¬m kÃ­ch thÆ°á»›c chá»¯ phÃ¹ há»£p vá»›i báº¡n.</p>
    </div>

    <div class="guide-section">
      <h3>ğŸ”Š CÃ i Ä‘áº·t Ã¢m thanh</h3>
      <p>Äiá»u chá»‰nh má»©c Ã¢m lÆ°á»£ng cho cÃ¡c Ä‘oáº¡n Ã¢m thanh:</p>
      <div class="audio-settings">
        <label for="volumeSlider2" style="display: block; margin-bottom: 8px; color: rgba(255,255,255,0.8); font-size: 1rem;">Má»©c Ã¢m lÆ°á»£ng: <span id="volumeValue2" style="font-weight: 600; color: rgb(77, 163, 255);">70</span>%</label>
        <input type="range" id="volumeSlider2" min="0" max="100" value="70" style="width: 100%; cursor: pointer; margin-bottom: 12px;" title="Äiá»u chá»‰nh Ã¢m lÆ°á»£ng">
        <button onclick="testAudio()" class="test-audio-btn">PhÃ¡t thá»­ Ã¢m thanh</button>
      </div>
    </div>

    <div class="guide-actions">
      <button class="guide-btn primary" onclick="closeSettings()">ÄÃ³ng</button>
    </div>
  </div>
</div>